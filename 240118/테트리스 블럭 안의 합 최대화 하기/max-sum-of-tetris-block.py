N, M = map(int, input().split())

tmap = [list(map(int, input().split())) for _ in range(N)]

line1 = [[0, 0], [0, 1], [0, 2], [0, 3]]
line2 = [[0, 0], [1, 0], [2, 0], [3, 0]]

s1 = [[0, 0], [0, 1], [1, 0], [1, 1]]

L1 = [[0, 0], [1, 0], [2, 0], [2, 1]]
L2 = [[0, 0], [1, 0], [2, 0], [2, -1]]
L3 = [[0, 0], [0, 1], [1, 0], [2, 0]]
L4 = [[0, 0], [0, -1], [1, 0], [2, 0]]

L5 = [[0, 0], [1, 0], [1, -1], [1, -2]]
L6 = [[0, 0], [1, 0], [1, 1], [1, 2]]
L7 = [[0, 0], [1, 0], [1, 1], [1, 2]]
L8 = [[0, 0], [1, 0], [1, 1], [1, -2]]

F1 = [[0, 0], [1, 0], [-1, 0], [0, 1]]
F2 = [[0, 0], [1, 0], [-1, 0], [0, -1]]
F3 = [[0, 0], [1, 0], [0, -1], [0, 1]]
F4 = [[0, 0], [-1, 0], [0, -1], [0, 1]]

H1 = [[0, 0], [1, 0], [1, 1], [2, 1]]
H2 = [[0, 0], [1, 0], [1, -1], [2, -1]]
H3 = [[0, 0], [0, 1], [-1, 1], [-1, 2]]
H4 = [[0, 0], [0, -1], [-1, -1], [-1, -2]]

cases = [line1, line2, s1, L1, L2, L3, L4, L5, L7, L8, F1, F2, F3, F4, H1, H2, H3, H4]

max_res = 0
for n in range(N):
    for m in range(M):
        for case in cases:
            temp_res = 0
            for ca in case:
                nr = n + ca[0]
                nc = m + ca[1]
                if nr < 0 or nc < 0 or nr >= N or nc >= M:
                    continue
                temp_res += tmap[nr][nc]
            if max_res < temp_res:
                max_res = temp_res

print(max_res)